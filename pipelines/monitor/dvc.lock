schema: '2.0'
stages:
  predict:
    cmd: python ../../src/stages/predict.py --config=params.yaml
    deps:
    - path: ../../data/current.csv
      md5: a7a83c4bc49a45ad14cf9d4b64b173b7
      size: 45736
    - path: ../../data/reference.csv
      md5: ff6463a6dd33b07bb405b6c272dc4fda
      size: 38764
    - path: ../../models/model.pickle
      md5: 8e15eaf7ab3dfa9202fc5059386797e3
      size: 2315104
    - path: ../../src/stages/predict.py
      md5: bed758ba93a4a7866b491ea93511b54f
      size: 2288
    params:
      params.yaml:
        base:
          workdir: ../..
          logging_level: INFO
        predict:
          model_path: models/model.pickle
    outs:
    - path: ../../data/current_prediction.csv
      md5: 7f3aa625f80cfdbcaccfa5ab4b7dcf4c
      size: 49910
    - path: ../../data/reference_prediction.csv
      md5: 417fe5cb6e3c7cdd657ec40ea21df524
      size: 42328
  monitoring:
    cmd: python ../../src/stages/monitor_model.py --config=params.yaml
    deps:
    - path: ../../data/predictions/2011-01-29--2011-02-04.csv
      hash: md5
      md5: 212c8b75d40dfed6f3353a16ff131c3b
      size: 12464
    - path: ../../src/stages/monitor_model.py
      hash: md5
      md5: 3d4b0a063465d6d14578d857be1519d8
      size: 4296
    params:
      params.yaml:
        base:
          workdir: ../..
          logging_level: INFO
        predict:
          model_path: models/model.joblib
          week_start: '2011-01-29'
          week_end: '2011-02-04'
          predictions_dir: data/predictions
    outs:
    - path: ../../reports/2011-01-29--2011-02-04/model_performance.html
      hash: md5
      md5: 435ae428531f908c36ac962a5c877aa6
      size: 3600457
    - path: ../../reports/2011-01-29--2011-02-04/target_drift.html
      hash: md5
      md5: 77560455c46352aa39baf5452e3e69c6
      size: 3570957
  monitor_data:
    cmd: python src/stages/monitor_data.py --config=pipelines/monitor/params.yaml
    deps:
    - path: data/predictions/2011-01-29--2011-02-04.csv
      hash: md5
      md5: 5d3e8995f608062bc2eb27b62943f54c
      size: 13021
    - path: src/stages/monitor_data.py
      hash: md5
      md5: 4fc5e55fc806668920448851210c475d
      size: 2757
    params:
      pipelines/monitor/params.yaml:
        monitoring:
          reports_dir: reports
          reference_data: data/reference_data.csv
          model_performance_path: model_performance.html
          target_drift_path: target_drift.html
          data_drift_path: data_drift.html
          data_quality_path: data_quality.html
        predict:
          model_path: models/model.joblib
          week_start: '2011-01-29'
          week_end: '2011-02-04'
          predictions_dir: data/predictions
    outs:
    - path: reports/2011-01-29--2011-02-04/data_drift.html
      hash: md5
      md5: 99676a9e2fa394ceb65313b52fad25d7
      size: 3669242
    - path: reports/2011-01-29--2011-02-04/data_quality.html
      hash: md5
      md5: 95bbe41bc93a3b4bdb5b763b17c87c87
      size: 3688190
  monitor_model:
    cmd: python src/stages/monitor_model.py --config=pipelines/monitor/params.yaml
    deps:
    - path: data/predictions/2011-01-29--2011-02-04.csv
      hash: md5
      md5: 5d3e8995f608062bc2eb27b62943f54c
      size: 13021
    - path: src/stages/monitor_model.py
      hash: md5
      md5: 979188cb7dab8f86db051196f341ed08
      size: 3078
    params:
      pipelines/monitor/params.yaml:
        monitoring:
          reports_dir: reports
          reference_data: data/reference_data.csv
          model_performance_path: model_performance.html
          target_drift_path: target_drift.html
          data_drift_path: data_drift.html
          data_quality_path: data_quality.html
        predict:
          model_path: models/model.joblib
          week_start: '2011-01-29'
          week_end: '2011-02-04'
          predictions_dir: data/predictions
    outs:
    - path: reports/2011-01-29--2011-02-04/model_performance.html
      hash: md5
      md5: 8e610b33eb439da0d4725c3182f8d0e3
      size: 3738731
    - path: reports/2011-01-29--2011-02-04/target_drift.html
      hash: md5
      md5: 8e6b3f37b18a18cecf27201a17808cd7
      size: 3572200
